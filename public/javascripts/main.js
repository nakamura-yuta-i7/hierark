webpackJsonp([0,1],[
/* 0 */
/***/ function(module, exports, __webpack_require__) {

	"use strict";
	
	void (function setGlobalVariables(globals) {
		globals.app = {};
		globals.ajax = __webpack_require__(1);
	})(window);
	
	__webpack_require__(2);
	__webpack_require__(3);
	__webpack_require__(4);
	__webpack_require__(5);
	__webpack_require__(6);
	__webpack_require__(7);
	
	$(document).on("drop", function (e) {
		if (e.preventDefault) {
			e.preventDefault();
		}
		console.log("drop");
	});
	
	$(document).on("dragover", function (e) {
		if (e.preventDefault) {
			e.preventDefault();
		}
		console.log("dragover");
	});

/***/ },
/* 1 */
/***/ function(module, exports) {

	"use strict";
	
	module.exports = new JqueryAjax();
	function JqueryAjax() {
		if (this instanceof Window) {
			// throw Error("こらー！newして使ってくださいね");
			return new JqueryAjax();
		}
		var self = this;
		self.get = function (params) {
			return $.ajax({
				async: true,
				cache: false,
				type: "GET",
				dataType: params.dataType || "json",
				url: params.url || "/",
				data: params.data || {},
				context: params.context || document,
				success: params.success || function (data) {
					console.debug(data);
				}
			});
		};
		self.post = function (params) {
			console.debug("ajax.post params:", params);
			var postData = params.data;
	
			var ajaxParams = {
				async: true,
				cache: false,
				type: "post",
				dataType: params.dataType || "json",
				url: params.url || "/",
				data: postData,
				context: params.context || document,
				success: params.success || function (data) {
					console.debug(data);
				},
				xhr: params.xhr || function () {
					XHR = $.ajaxSettings.xhr();
					if (XHR.upload) {
						XHR.upload.addEventListener('progress', function (e) {
							progre = parseInt(e.loaded / e.total * 10000) / 100;
							console.debug(progre + "%");
							$("#progress-bar").width(progre + "%");
						}, false);
					}
					return XHR;
				}
			};
	
			// FILEアップロードする場合
			if (params.file || params.files) {
	
				var formData = new FormData();
				if (params.data) {
					Object.keys(params.data).forEach(function (key) {
						formData.append(key, params.data[key]);
					});
				}
				if (params.file) {
					formData.append("file", params.file);
				}
				if (params.files) {
					Object.keys(params.files).forEach(function (key) {
						var file = params.files[key];
						formData.append("files[]", file);
					});
				}
	
				ajaxParams.data = formData;
				ajaxParams.contentType = false; // FormData使う場合、必須
				ajaxParams.processData = false; // FormData使う場合、必須
			}
	
			return $.ajax(ajaxParams);
		};
		self.uploadSingle = function (file, params) {
			params.file = file;
			return self.post(params);
		};
		self.uploadMulti = function (files, params) {
			params.files = files;
			return self.post(params);
		};
	}

/***/ },
/* 2 */
/***/ function(module, exports) {

	"use strict";
	
	app.util = {};
	app.util.objectToHtml = function (obj) {
		var html = "";
		Object.keys(obj).forEach(function (key) {
			html += key + ": " + obj[key] + "<br>";
		});
		return html;
	};
	app.util.autoLink = function (str) {
		if (!str) return str;
		return str.replace(/((http|https|ftp):\/\/[\w?=&.\/-;#~%-]+(?![\w\s?&.\/;#~%"=-]*>))/g, '<a target="_blank" href="$1">$1</a> ');
	};

/***/ },
/* 3 */
/***/ function(module, exports) {

	"use strict";
	
	(function () {
		var itemsArea = document.querySelector(".items");
		var itemsMousetrap = new Mousetrap(itemsArea);
		var pressKey = null;
		itemsMousetrap.bind('up', function (e) {
			pressKey = e.keyIdentifier;
			$(":focus").closest("li").prev().find("a").focus();
		});
		itemsMousetrap.bind('down', function (e) {
			pressKey = e.keyIdentifier;
			$(":focus").closest("li").next().find("a").focus();
		});
		itemsMousetrap.bind('right', function (e) {
			pressKey = e.keyIdentifier;
			$(":focus").closest("ul").next().find("li a").first().focus();
		});
		itemsMousetrap.bind('left', function (e) {
			pressKey = e.keyIdentifier;
			console.log("left e.keyIdentifier:", e.keyIdentifier);
	
			var item = $(":focus").closest("ul").prev().find("li[selected]");
			if (item.length) {
				// ルートアイテムじゃなければ
				item.find("a").focus();
				var url = item.find("a").attr("href");
				app.ItemDetail.loadContent(url);
			}
		});
		$(document).on("focus", ".items ul li a", function (e) {
			if (pressKey) {
				if (pressKey != "Left") {
					$(this).trigger("click");
				}
				pressKey = null;
			}
		});
	})();
	
	Mousetrap.bind('tab', function (e) {
		e.preventDefault();
	
		if (app.ItemDetail.loadedItem) {
			// 詳細表示している場合
			var item_id = app.ItemDetail.loadedItem.id;
			$(".items ul .item[item_id=" + item_id + "] a").focus();
		} else {
			// アイテム初期表示状態でtab押した場合
			$(".items ul a").first().focus().trigger("click");
		}
	});

/***/ },
/* 4 */
/***/ function(module, exports) {

	"use strict";
	
	$(function () {
		var items = new app.Items();
		app.Items.setKeyPressAction();
	});
	
	void (function () {
		app.Items = Items;
		function Items() {
			var self = this;
			self.area = $(".items .inner");
			self.setContextMenuEvent();
	
			void (function setInitialState() {
				ajax.get({
					url: "/api/items",
					data: {
						parent_id: null
					},
					success: function success(data) {
						self.addRootItems(data);
					}
				});
			})();
		}
		Items.prototype.setContextMenuEvent = function () {
			$(function () {
				$(".items .inner").resizable({
					handles: "s",
					stop: function stop(event, ui) {
						// リサイズ完了した時にクッキーに高さを保存
						var h = ui.size.height;
						$.cookie('.items-resized-height', h);
					},
					resize: function resize(event, ui) {
						var h = ui.size.height;
						$(".items").height(h);
					}
				});
				// クッキーに記憶した高さがあれば調整
				var savedHeight = $.cookie('.items-resized-height');
				if (savedHeight) {
					$(".items").height(savedHeight);
				}
			});
			// フォルダを右クリックした時
			$(document).on("contextmenu", ".items ul li.folder", function (e) {
				e.preventDefault();
				getSelection().removeAllRanges(); // 選択範囲をすべて解除
	
				var clickedItem = $(this);
				app.Item.add(clickedItem);
				return false;
			});
			// ULを右クリックした時
			$(document).on("contextmenu", ".items ul", function (e) {
				e.preventDefault();
				getSelection().removeAllRanges(); // 選択範囲をすべて解除
				var clickedItem = $(this).prev().find("li[selected]");
				app.Item.add(clickedItem);
			});
		};
		Items.prototype.addRootItems = function (items) {
			this.area.append(new app.ItemList(items));
		};
		Items.setKeyPressAction = function () {};
	})();

/***/ },
/* 5 */
/***/ function(module, exports) {

	"use strict";
	
	void (function () {
		app.ItemList = ItemList;
		function ItemList(items) {
			return this.buildElement(items);
		}
		ItemList.prototype.buildElement = function (items) {
			var ul = $("<ul>");
			ul.attr("ul_id", $(".items ul").size());
			items.forEach(function (item) {
				var item = new app.Item(item);
				ul.append(item);
			});
			return ul;
		};
	})();

/***/ },
/* 6 */
/***/ function(module, exports) {

	"use strict";
	
	$(function () {
		app.Item.setClickEvent();
		app.Item.setRightClickEvent();
		app.Item.setDnDEvent();
	});
	void (function () {
		app.Item = Item;
		function Item(data) {
			var elem = this.buildElement(data);
			return elem;
		}
		Item.prototype.buildElement = function (data) {
			var name = data.name;
			var id = data.id;
			var type = data.type;
			var span = $("<span>");
			span.addClass("glyphicon").addClass("glyphicon-folder-close");
			var name_span = $("<span class=name>");
			name_span.text(name);
			span.append(name_span);
			var a = $("<a href=/api/item/" + id + " item_id=" + id + " draggable=false>");
			a.append(span);
			var li = $("<li item_id=" + id + " draggable=true>").addClass("item");
			if (type == "folder") {
				li.addClass("folder");
			}
			li.append(a);
			return li;
		};
		Item.add = function (parentItem) {
			var name = "";
			var parent_id = parentItem.attr("item_id");
			if (name = prompt("新規作成します", "新しいアイテム")) {
				ajax.post({
					url: "/api/item/add",
					data: {
						name: name,
						parent_id: parent_id
					},
					success: function success(new_item) {
						parentItem.find("a").trigger("click");
						console.log("ajax item/save data:", new_item);
					}
				});
			}
		};
	
		app.Item.setClickEvent = function () {
	
			$(document).on("click", ".item a", function (e) {
				e.preventDefault();
				var self = this;
				var clickedItem = $(self).closest("li");
				var clickedUl = $(self).closest("ul");
				var parentItemsArea = $(this).closest(".items");
	
				// コンテンツ読み込み
				var url = $(self).attr("href");
				app.ItemDetail.loadContent(url);
	
				// selectedアイテムにする
				// 他のアイテムはselectedを外す
				clickedUl.find(".item").removeAttr("selected");
				clickedItem.attr("selected", true);
	
				// アイテム背景色を調整
				void (function adjustBgColor() {
					$(this).closest("ul").find("a").css("background-color", "");
					$(this).css("background-color", "#cccccc");
				}).bind(this)();
	
				// 子アイテムを読み込み
				void (function loadChildItems() {
					if (!clickedItem.hasClass("folder")) {
						// クリックしたアイテムがフォルダじゃないなら何もしない
						return false;
					}
					ajax.get({
						url: "/api/items",
						data: {
							parent_id: $(self).attr("item_id")
						},
						success: function success(items) {
	
							// 自身のフォルダ配下のULを一度削除
							void (function destroyChildItem() {
								var selfUlId = clickedUl.attr("ul_id");
								var foundFlag = false;
								parentItemsArea.find("ul").each(function (i) {
									var eachUl = $(this);
									var eachUlId = eachUl.attr("ul_id");
									if (foundFlag) {
										eachUl.remove();
									}
									if (eachUlId == selfUlId) {
										foundFlag = true;
									}
								});
							})();
							// 読み込んだアイテムを追加
							$(".items .inner").append(new app.ItemList(items));
							// UL群の合計幅を.itemsにセット
							void (function setItemsWidth() {
								var width = 0;
								$(".items ul").each(function (ul) {
									width += $(this).outerWidth();
								});
								console.log("total width:", width);
								$(".items .inner").width(width + 20);
							})();
							// .itemsエリア内のスクロールを右に寄せる
							void (function () {
								$(".items").scrollLeft(999999);
							})();
						}
					});
				})();
			});
		};
	
		app.Item.setDnDEvent = function () {
			var drag_item_id = null;
			var drop_item_id = null;
	
			$(document).on("dragstart", ".items .item", function (e) {
				drag_item_id = $(this).attr("item_id");
				console.log("dragstart");
			});
			$(document).on("dragenter", ".items .item", function (e) {
				drop_item_id = $(this).attr("item_id");
				$(this).addClass("over");
				console.log("dragenter");
			});
			$(document).on("dragleave", ".items .item", function (e) {
				$(this).removeClass("over");
				console.log("dragleave");
			});
			$(document).on("dragend", ".items .item", function (e) {
	
				if (!drop_item_id) {
					console.log("dropしたitem_idがnull、return false");
					return false;
				}
				if (drag_item_id == drop_item_id) {
					console.log("同じIDの為、return false");
					return false;
				}
				(function () {
					var parent_id = drop_item_id;
					var id = drag_item_id;
					ajax.post({
						url: "/api/item/update",
						data: {
							id: id,
							parent_id: parent_id
						},
						success: (function (new_item) {
							$(".item[item_id=" + parent_id + "] a").trigger("click").focus();
							console.log("ajax item/updated_item:", new_item);
							$(this).remove();
						}).bind(this)
					});
				})();
				dragoverStyleReset();
				console.log("dragend");
			});
			function dragoverStyleReset() {
				console.log("dragoverStyleReset.");
				$(".items .item").removeClass("over");
			}
		};
	
		app.Item.setRightClickEvent = function () {};
	})();

/***/ },
/* 7 */
/***/ function(module, exports) {

	"use strict";
	
	(function () {
		app.ItemDetail = ItemDetail;
	
		function ItemDetail() {}
	
		ItemDetail.loadedItem = null;
		var doLoadTimer = null;
		ItemDetail.loadContent = function (url) {
			if (doLoadTimer) {
				clearTimeout(doLoadTimer);
			}
			// 指定秒数待ってからリクエスト
			// アイテム移動を繰り返す場合、無駄なリクエストになるため
			doLoadTimer = setTimeout(function () {
				var detailArea = $(".detail");
				ajax.get({
					url: url,
					success: function success(item) {
						ItemDetail.loadedItem = item;
						detailArea.show();
						detailArea.find("h2").text(item.name);
						detailArea.find(".text").html(app.util.autoLink(item.text));
	
						var data = {};
						data.created_at = item.created_at;
						data.updated_at = item.updated_at;
						detailArea.find(".content").html(app.util.objectToHtml(data));
					}
				});
			}, 100);
		};
	
		$(document).on("click", ".content .name, .text", function () {
			$(this).attr("contenteditable", "true").focus();
			// console.log( "!" );
		});
		$(document).on("blur", ".content .name, .text", function () {
			$(this).attr("contenteditable", "false");
			var detailArea = $(".detail");
			ajax.post({
				url: "/api/item/update",
				data: {
					id: ItemDetail.loadedItem.id,
					name: detailArea.find("h2.name").text(),
					text: detailArea.find(".text").html()
				},
				success: function success(item) {
					console.log("/api/item/update item:", item);
				}
			});
		});
	})();

/***/ }
]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvd2ViL2FwcC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvd2ViL2pxdWVyeV9hamF4LmpzIiwid2VicGFjazovLy8uL3NyYy93ZWIvYXBwL3V0aWwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3dlYi9rZXlfYWN0aW9uLmpzIiwid2VicGFjazovLy8uL3NyYy93ZWIvaXRlbXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3dlYi9pdGVtX2xpc3QuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3dlYi9pdGVtLmpzIiwid2VicGFjazovLy8uL3NyYy93ZWIvaXRlbV9kZXRhaWwuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ0EsTUFBSyxVQUFTLGtCQUFrQixDQUFDLE9BQU8sRUFBRTtBQUN6QyxTQUFPLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQztBQUNqQixTQUFPLENBQUMsSUFBSSxHQUFHLG1CQUFPLENBQUMsQ0FBa0IsQ0FBQztFQUMxQyxFQUFDLE1BQU0sQ0FBQyxDQUFDOztBQUVWLG9CQUFPLENBQUMsQ0FBZSxDQUFDO0FBQ3hCLG9CQUFPLENBQUMsQ0FBaUIsQ0FBQztBQUMxQixvQkFBTyxDQUFDLENBQVksQ0FBQztBQUNyQixvQkFBTyxDQUFDLENBQWdCLENBQUM7QUFDekIsb0JBQU8sQ0FBQyxDQUFXLENBQUM7QUFDcEIsb0JBQU8sQ0FBQyxDQUFrQixDQUFDOztBQUUzQixFQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxVQUFTLENBQUMsRUFBRTtBQUNsQyxNQUFLLENBQUMsQ0FBQyxjQUFjLEVBQUc7QUFDdkIsSUFBQyxDQUFDLGNBQWMsRUFBRSxDQUFDO0dBQ25CO0FBQ0QsU0FBTyxDQUFDLEdBQUcsQ0FBRSxNQUFNLENBQUUsQ0FBQztFQUN0QixDQUFDLENBQUM7O0FBRUgsRUFBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxVQUFVLEVBQUUsVUFBUyxDQUFDLEVBQUU7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QUFDdkMsU0FBSSxFQUFFLFVBQVUsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxFQUFFO0tBQ3JDO0FBQ0QsV0FBTyxFQUFFLGlCQUFTLElBQUksRUFBRTtBQUN2QixZQUFPLENBQUMsR0FBRyxDQUFFLHdCQUF3QixFQUFFLElBQUksQ0FBRSxDQUFDO0tBQzlDO0lBQ0QsQ0FBQyxDQUFDO0dBQ0gsQ0FBQyxDQUFDO0VBQ0gsR0FBRyxDIiwiZmlsZSI6ImphdmFzY3JpcHRzL21haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbnZvaWQgZnVuY3Rpb24gc2V0R2xvYmFsVmFyaWFibGVzKGdsb2JhbHMpIHtcblx0Z2xvYmFscy5hcHAgPSB7fTtcblx0Z2xvYmFscy5hamF4ID0gcmVxdWlyZShcIi4vanF1ZXJ5X2FqYXguanNcIilcbn0od2luZG93KTtcblxucmVxdWlyZShcIi4vYXBwL3V0aWwuanNcIilcbnJlcXVpcmUoXCIuL2tleV9hY3Rpb24uanNcIilcbnJlcXVpcmUoXCIuL2l0ZW1zLmpzXCIpXG5yZXF1aXJlKFwiLi9pdGVtX2xpc3QuanNcIilcbnJlcXVpcmUoXCIuL2l0ZW0uanNcIilcbnJlcXVpcmUoXCIuL2l0ZW1fZGV0YWlsLmpzXCIpXG5cbiQoZG9jdW1lbnQpLm9uKFwiZHJvcFwiLCBmdW5jdGlvbihlKSB7XG5cdGlmICggZS5wcmV2ZW50RGVmYXVsdCApIHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdH1cblx0Y29uc29sZS5sb2coIFwiZHJvcFwiICk7XG59KTtcblxuJChkb2N1bWVudCkub24oXCJkcmFnb3ZlclwiLCBmdW5jdGlvbihlKSB7XG5cdGlmICggZS5wcmV2ZW50RGVmYXVsdCApIHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdH1cblx0Y29uc29sZS5sb2coIFwiZHJhZ292ZXJcIik7XG59KTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL3dlYi9hcHAuanNcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IG5ldyBKcXVlcnlBamF4O1xuZnVuY3Rpb24gSnF1ZXJ5QWpheCgpIHtcblx0aWYgKCB0aGlzIGluc3RhbmNlb2YgV2luZG93ICkge1xuXHRcdC8vIHRocm93IEVycm9yKFwi44GT44KJ44O877yBbmV344GX44Gm5L2/44Gj44Gm44GP44Gg44GV44GE44GtXCIpO1xuXHRcdHJldHVybiBuZXcgSnF1ZXJ5QWpheCgpO1xuXHR9XG5cdHZhciBzZWxmID0gdGhpcztcblx0c2VsZi5nZXQgPSBmdW5jdGlvbihwYXJhbXMpIHtcblx0XHRyZXR1cm4gJC5hamF4KHtcblx0XHRcdGFzeW5jICAgIDogdHJ1ZSxcblx0XHRcdGNhY2hlICAgIDogZmFsc2UsXG5cdFx0XHR0eXBlICAgICA6IFwiR0VUXCIsXG5cdFx0XHRkYXRhVHlwZSA6IHBhcmFtcy5kYXRhVHlwZSB8fCBcImpzb25cIixcblx0XHRcdHVybCAgICAgIDogcGFyYW1zLnVybCB8fCBcIi9cIixcblx0XHRcdGRhdGEgICAgIDogcGFyYW1zLmRhdGEgfHwge30sXG5cdFx0XHRjb250ZXh0ICA6IHBhcmFtcy5jb250ZXh0IHx8IGRvY3VtZW50LFxuXHRcdFx0c3VjY2VzcyAgOiBwYXJhbXMuc3VjY2VzcyB8fCBmdW5jdGlvbihkYXRhKXsgY29uc29sZS5kZWJ1ZyggZGF0YSApOyB9XG5cdFx0fSk7XG5cdH1cblx0c2VsZi5wb3N0ID0gZnVuY3Rpb24ocGFyYW1zKSB7XG5cdFx0Y29uc29sZS5kZWJ1ZyggXCJhamF4LnBvc3QgcGFyYW1zOlwiLCBwYXJhbXMgKTtcblx0XHR2YXIgcG9zdERhdGEgPSBwYXJhbXMuZGF0YTtcblx0XHRcblx0XHR2YXIgYWpheFBhcmFtcyA9IHtcblx0XHRcdGFzeW5jICAgIDogdHJ1ZSxcblx0XHRcdGNhY2hlICAgIDogZmFsc2UsXG5cdFx0XHR0eXBlICAgICA6IFwicG9zdFwiLFxuXHRcdFx0ZGF0YVR5cGUgOiBwYXJhbXMuZGF0YVR5cGUgfHwgXCJqc29uXCIsXG5cdFx0XHR1cmwgICAgICA6IHBhcmFtcy51cmwgfHwgXCIvXCIsXG5cdFx0XHRkYXRhICAgICA6IHBvc3REYXRhLFxuXHRcdFx0Y29udGV4dCAgOiBwYXJhbXMuY29udGV4dCB8fCBkb2N1bWVudCxcblx0XHRcdHN1Y2Nlc3MgIDogcGFyYW1zLnN1Y2Nlc3MgfHwgZnVuY3Rpb24oZGF0YSl7IGNvbnNvbGUuZGVidWcoIGRhdGEgKTsgfSxcblx0XHRcdHhociAgICAgIDogcGFyYW1zLnhociB8fCBmdW5jdGlvbigpe1xuXHRcdFx0XHRYSFIgPSAkLmFqYXhTZXR0aW5ncy54aHIoKTtcblx0XHRcdFx0aWYoIFhIUi51cGxvYWQgKXtcblx0XHRcdFx0XHRYSFIudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoJ3Byb2dyZXNzJyxmdW5jdGlvbihlKXtcblx0XHRcdFx0XHRcdHByb2dyZSA9IHBhcnNlSW50KCBlLmxvYWRlZCAvIGUudG90YWwgKiAxMDAwMCApIC8gMTAwO1xuXHRcdFx0XHRcdFx0Y29uc29sZS5kZWJ1Zyhwcm9ncmUrXCIlXCIpO1xuXHRcdFx0XHRcdFx0JChcIiNwcm9ncmVzcy1iYXJcIikud2lkdGgocHJvZ3JlICsgXCIlXCIpO1xuXHRcdFx0XHRcdH0sIGZhbHNlKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gWEhSO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0XG5cdFx0Ly8gRklMReOCouODg+ODl+ODreODvOODieOBmeOCi+WgtOWQiFxuXHRcdGlmICggcGFyYW1zLmZpbGUgfHwgcGFyYW1zLmZpbGVzICkge1xuXHRcdFx0XG5cdFx0XHR2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcblx0XHRcdGlmICggcGFyYW1zLmRhdGEgKSB7XG5cdFx0XHRcdE9iamVjdC5rZXlzKHBhcmFtcy5kYXRhKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSl7XG5cdFx0XHRcdFx0Zm9ybURhdGEuYXBwZW5kKGtleSwgcGFyYW1zLmRhdGFba2V5XSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCBwYXJhbXMuZmlsZSApIHtcblx0XHRcdFx0Zm9ybURhdGEuYXBwZW5kKFwiZmlsZVwiLCBwYXJhbXMuZmlsZSk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIHBhcmFtcy5maWxlcyApIHtcblx0XHRcdFx0T2JqZWN0LmtleXMocGFyYW1zLmZpbGVzKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSl7XG5cdFx0XHRcdFx0dmFyIGZpbGUgPSBwYXJhbXMuZmlsZXNba2V5XTtcblx0XHRcdFx0XHRmb3JtRGF0YS5hcHBlbmQoXCJmaWxlc1tdXCIsIGZpbGUpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0YWpheFBhcmFtcy5kYXRhID0gZm9ybURhdGE7XG5cdFx0XHRhamF4UGFyYW1zLmNvbnRlbnRUeXBlID0gZmFsc2U7IC8vIEZvcm1EYXRh5L2/44GG5aC05ZCI44CB5b+F6aCIXG5cdFx0XHRhamF4UGFyYW1zLnByb2Nlc3NEYXRhID0gZmFsc2U7IC8vIEZvcm1EYXRh5L2/44GG5aC05ZCI44CB5b+F6aCIXG5cdFx0fVxuXHRcdFxuXHRcdHJldHVybiAkLmFqYXgoYWpheFBhcmFtcyk7XG5cdH1cblx0c2VsZi51cGxvYWRTaW5nbGUgPSBmdW5jdGlvbihmaWxlLCBwYXJhbXMpIHtcblx0XHRwYXJhbXMuZmlsZSA9IGZpbGU7XG5cdFx0cmV0dXJuIHNlbGYucG9zdChwYXJhbXMpO1xuXHR9XG5cdHNlbGYudXBsb2FkTXVsdGkgPSBmdW5jdGlvbihmaWxlcywgcGFyYW1zKSB7XG5cdFx0cGFyYW1zLmZpbGVzID0gZmlsZXM7XG5cdFx0cmV0dXJuIHNlbGYucG9zdChwYXJhbXMpO1xuXHR9XG59XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy93ZWIvanF1ZXJ5X2FqYXguanNcbiAqKi8iLCJhcHAudXRpbCA9IHt9O1xuYXBwLnV0aWwub2JqZWN0VG9IdG1sID0gZnVuY3Rpb24ob2JqKSB7XG5cdHZhciBodG1sID0gXCJcIjtcblx0T2JqZWN0LmtleXMob2JqKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuXHRcdGh0bWwgKz0ga2V5ICsgXCI6IFwiICsgb2JqW2tleV0gKyBcIjxicj5cIjtcblx0fSk7XG5cdHJldHVybiBodG1sO1xufVxuYXBwLnV0aWwuYXV0b0xpbmsgPSBmdW5jdGlvbihzdHIpIHtcblx0aWYgKCAhIHN0ciApIHJldHVybiBzdHI7XG5cdHJldHVybiBzdHIucmVwbGFjZSgvKChodHRwfGh0dHBzfGZ0cCk6XFwvXFwvW1xcdz89Ji5cXC8tOyN+JS1dKyg/IVtcXHdcXHM/Ji5cXC87I34lXCI9LV0qPikpL2csICc8YSB0YXJnZXQ9XCJfYmxhbmtcIiBocmVmPVwiJDFcIj4kMTwvYT4gJyk7XG59XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy93ZWIvYXBwL3V0aWwuanNcbiAqKi8iLCIoZnVuY3Rpb24oKSB7XG5cdHZhciBpdGVtc0FyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLml0ZW1zXCIpO1xuXHR2YXIgaXRlbXNNb3VzZXRyYXAgPSBuZXcgTW91c2V0cmFwKGl0ZW1zQXJlYSk7XG5cdHZhciBwcmVzc0tleSA9IG51bGw7XG5cdGl0ZW1zTW91c2V0cmFwLmJpbmQoJ3VwJywgZnVuY3Rpb24oZSkge1xuXHRcdHByZXNzS2V5ID0gZS5rZXlJZGVudGlmaWVyO1xuXHRcdCQoXCI6Zm9jdXNcIikuY2xvc2VzdChcImxpXCIpLnByZXYoKS5maW5kKFwiYVwiKS5mb2N1cygpO1xuXHR9KTtcblx0aXRlbXNNb3VzZXRyYXAuYmluZCgnZG93bicsIGZ1bmN0aW9uKGUpIHtcblx0XHRwcmVzc0tleSA9IGUua2V5SWRlbnRpZmllcjtcblx0XHQkKFwiOmZvY3VzXCIpLmNsb3Nlc3QoXCJsaVwiKS5uZXh0KCkuZmluZChcImFcIikuZm9jdXMoKTtcblx0fSk7XG5cdGl0ZW1zTW91c2V0cmFwLmJpbmQoJ3JpZ2h0JywgZnVuY3Rpb24oZSkge1xuXHRcdHByZXNzS2V5ID0gZS5rZXlJZGVudGlmaWVyO1xuXHRcdCQoXCI6Zm9jdXNcIikuY2xvc2VzdChcInVsXCIpLm5leHQoKS5maW5kKFwibGkgYVwiKS5maXJzdCgpLmZvY3VzKCk7XG5cdH0pO1xuXHRpdGVtc01vdXNldHJhcC5iaW5kKCdsZWZ0JywgZnVuY3Rpb24oZSkge1xuXHRcdHByZXNzS2V5ID0gZS5rZXlJZGVudGlmaWVyO1xuXHRcdGNvbnNvbGUubG9nKCBcImxlZnQgZS5rZXlJZGVudGlmaWVyOlwiLCBlLmtleUlkZW50aWZpZXIgKTtcblx0XHRcblx0XHR2YXIgaXRlbSA9ICQoXCI6Zm9jdXNcIikuY2xvc2VzdChcInVsXCIpLnByZXYoKS5maW5kKFwibGlbc2VsZWN0ZWRdXCIpO1xuXHRcdGlmICggaXRlbS5sZW5ndGggKSB7XG5cdFx0XHQvLyDjg6vjg7zjg4jjgqLjgqTjg4bjg6DjgZjjgoPjgarjgZHjgozjgbBcblx0XHRcdGl0ZW0uZmluZChcImFcIikuZm9jdXMoKTtcblx0XHRcdHZhciB1cmwgPSBpdGVtLmZpbmQoXCJhXCIpLmF0dHIoXCJocmVmXCIpO1xuXHRcdFx0YXBwLkl0ZW1EZXRhaWwubG9hZENvbnRlbnQodXJsKTtcblx0XHR9XG5cdH0pO1xuXHQkKGRvY3VtZW50KS5vbihcImZvY3VzXCIsXCIuaXRlbXMgdWwgbGkgYVwiLCBmdW5jdGlvbihlKSB7XG5cdFx0aWYgKCBwcmVzc0tleSApIHtcblx0XHRcdGlmICggcHJlc3NLZXkgIT0gXCJMZWZ0XCIgKSB7XG5cdFx0XHRcdCQodGhpcykudHJpZ2dlcihcImNsaWNrXCIpO1xuXHRcdFx0fVxuXHRcdFx0cHJlc3NLZXkgPSBudWxsO1xuXHRcdH1cblx0fSk7XG59KSgpO1xuXHRcbk1vdXNldHJhcC5iaW5kKCd0YWInLCBmdW5jdGlvbihlKSB7XG5cdGUucHJldmVudERlZmF1bHQoKTtcblx0XG5cdGlmICggYXBwLkl0ZW1EZXRhaWwubG9hZGVkSXRlbSApIHtcblx0XHQvLyDoqbPntLDooajnpLrjgZfjgabjgYTjgovloLTlkIhcblx0XHR2YXIgaXRlbV9pZCA9IGFwcC5JdGVtRGV0YWlsLmxvYWRlZEl0ZW0uaWQ7XG5cdFx0JChcIi5pdGVtcyB1bCAuaXRlbVtpdGVtX2lkPVwiKyBpdGVtX2lkICtcIl0gYVwiKS5mb2N1cygpO1xuXHR9IGVsc2Uge1xuXHRcdC8vIOOCouOCpOODhuODoOWIneacn+ihqOekuueKtuaFi+OBp3RhYuaKvOOBl+OBn+WgtOWQiFxuXHRcdCQoXCIuaXRlbXMgdWwgYVwiKS5maXJzdCgpLmZvY3VzKCkudHJpZ2dlcihcImNsaWNrXCIpO1xuXHR9XG59KTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL3dlYi9rZXlfYWN0aW9uLmpzXG4gKiovIiwiJChmdW5jdGlvbigpIHtcblx0dmFyIGl0ZW1zID0gbmV3IGFwcC5JdGVtcygpO1xuXHRhcHAuSXRlbXMuc2V0S2V5UHJlc3NBY3Rpb24oKTtcbn0pO1xuXG52b2lkIGZ1bmN0aW9uKCkge1xuXHRhcHAuSXRlbXMgPSBJdGVtcztcblx0ZnVuY3Rpb24gSXRlbXMoKSB7XG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdHNlbGYuYXJlYSA9ICQoXCIuaXRlbXMgLmlubmVyXCIpO1xuXHRcdHNlbGYuc2V0Q29udGV4dE1lbnVFdmVudCgpO1xuXHRcdFxuXHRcdHZvaWQgZnVuY3Rpb24gc2V0SW5pdGlhbFN0YXRlKCkge1xuXHRcdFx0YWpheC5nZXQoe1xuXHRcdFx0XHR1cmw6IFwiL2FwaS9pdGVtc1wiLFxuXHRcdFx0XHRkYXRhOiB7XG5cdFx0XHRcdFx0cGFyZW50X2lkOiBudWxsLFxuXHRcdFx0XHR9LFxuXHRcdFx0XHRzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XG5cdFx0XHRcdFx0c2VsZi5hZGRSb290SXRlbXMoZGF0YSk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0oKTtcblx0fVxuXHRJdGVtcy5wcm90b3R5cGUuc2V0Q29udGV4dE1lbnVFdmVudCA9IGZ1bmN0aW9uKCkge1xuXHRcdCQoZnVuY3Rpb24oKSB7XG5cdFx0XHQkKFwiLml0ZW1zIC5pbm5lclwiKS5yZXNpemFibGUoe1xuXHRcdFx0XHRoYW5kbGVzOiBcInNcIixcblx0XHRcdFx0c3RvcDogZnVuY3Rpb24oIGV2ZW50LCB1aSApIHtcblx0XHRcdFx0XHQvLyDjg6rjgrXjgqTjgrrlrozkuobjgZfjgZ/mmYLjgavjgq/jg4Pjgq3jg7zjgavpq5jjgZXjgpLkv53lrZhcblx0XHRcdFx0XHR2YXIgaCA9IHVpLnNpemUuaGVpZ2h0O1xuXHRcdFx0XHRcdCQuY29va2llKCcuaXRlbXMtcmVzaXplZC1oZWlnaHQnLCBoKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0cmVzaXplOiBmdW5jdGlvbiggZXZlbnQsIHVpICkge1xuXHRcdFx0XHRcdHZhciBoID0gdWkuc2l6ZS5oZWlnaHQ7XG5cdFx0XHRcdFx0JChcIi5pdGVtc1wiKS5oZWlnaHQoaCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0Ly8g44Kv44OD44Kt44O844Gr6KiY5oa244GX44Gf6auY44GV44GM44GC44KM44Gw6Kq/5pW0XG5cdFx0XHR2YXIgc2F2ZWRIZWlnaHQgPSAkLmNvb2tpZSgnLml0ZW1zLXJlc2l6ZWQtaGVpZ2h0Jyk7XG5cdFx0XHRpZiAoIHNhdmVkSGVpZ2h0ICkge1xuXHRcdFx0XHQkKFwiLml0ZW1zXCIpLmhlaWdodChzYXZlZEhlaWdodCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0Ly8g44OV44Kp44Or44OA44KS5Y+z44Kv44Oq44OD44Kv44GX44Gf5pmCXG5cdFx0JChkb2N1bWVudCkub24oXCJjb250ZXh0bWVudVwiLCBcIi5pdGVtcyB1bCBsaS5mb2xkZXJcIiwgZnVuY3Rpb24oZSkge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0Z2V0U2VsZWN0aW9uKCkucmVtb3ZlQWxsUmFuZ2VzKCk7IC8vIOmBuOaKnuevhOWbsuOCkuOBmeOBueOBpuino+mZpFxuXHRcdFx0XG5cdFx0XHR2YXIgY2xpY2tlZEl0ZW0gPSAkKHRoaXMpO1xuXHRcdFx0YXBwLkl0ZW0uYWRkKGNsaWNrZWRJdGVtKTtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9KTtcblx0XHQvLyBVTOOCkuWPs+OCr+ODquODg+OCr+OBl+OBn+aZglxuXHRcdCQoZG9jdW1lbnQpLm9uKFwiY29udGV4dG1lbnVcIiwgXCIuaXRlbXMgdWxcIiwgZnVuY3Rpb24oZSkge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0Z2V0U2VsZWN0aW9uKCkucmVtb3ZlQWxsUmFuZ2VzKCk7IC8vIOmBuOaKnuevhOWbsuOCkuOBmeOBueOBpuino+mZpFxuXHRcdFx0dmFyIGNsaWNrZWRJdGVtID0gJCh0aGlzKS5wcmV2KCkuZmluZChcImxpW3NlbGVjdGVkXVwiKTtcblx0XHRcdGFwcC5JdGVtLmFkZChjbGlja2VkSXRlbSk7XG5cdFx0fSk7XG5cdH1cblx0SXRlbXMucHJvdG90eXBlLmFkZFJvb3RJdGVtcyA9IGZ1bmN0aW9uKGl0ZW1zKSB7XG5cdFx0dGhpcy5hcmVhLmFwcGVuZChuZXcgYXBwLkl0ZW1MaXN0KGl0ZW1zKSk7XG5cdH1cblx0SXRlbXMuc2V0S2V5UHJlc3NBY3Rpb24gPSBmdW5jdGlvbigpIHtcblx0XHRcblx0fVxufSgpO1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvd2ViL2l0ZW1zLmpzXG4gKiovIiwidm9pZCBmdW5jdGlvbigpIHtcblx0YXBwLkl0ZW1MaXN0ID0gSXRlbUxpc3Q7XG5cdGZ1bmN0aW9uIEl0ZW1MaXN0KGl0ZW1zKSB7XG5cdFx0cmV0dXJuIHRoaXMuYnVpbGRFbGVtZW50KGl0ZW1zKTtcblx0fVxuXHRJdGVtTGlzdC5wcm90b3R5cGUuYnVpbGRFbGVtZW50ID0gZnVuY3Rpb24oaXRlbXMpIHtcblx0XHR2YXIgdWwgPSAkKFwiPHVsPlwiKTtcblx0XHR1bC5hdHRyKFwidWxfaWRcIiwgJChcIi5pdGVtcyB1bFwiKS5zaXplKCkgKTtcblx0XHRpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcblx0XHRcdHZhciBpdGVtID0gbmV3IGFwcC5JdGVtKGl0ZW0pO1xuXHRcdFx0dWwuYXBwZW5kKGl0ZW0pO1xuXHRcdH0pO1xuXHRcdHJldHVybiB1bDtcblx0fVxufSgpO1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvd2ViL2l0ZW1fbGlzdC5qc1xuICoqLyIsIiQoZnVuY3Rpb24oKSB7XG5cdGFwcC5JdGVtLnNldENsaWNrRXZlbnQoKTtcblx0YXBwLkl0ZW0uc2V0UmlnaHRDbGlja0V2ZW50KCk7XG5cdGFwcC5JdGVtLnNldERuREV2ZW50KCk7XG59KTtcbnZvaWQgZnVuY3Rpb24oKSB7XG5cdGFwcC5JdGVtID0gSXRlbTtcblx0ZnVuY3Rpb24gSXRlbShkYXRhKSB7XG5cdFx0dmFyIGVsZW0gPSB0aGlzLmJ1aWxkRWxlbWVudChkYXRhKTtcblx0XHRyZXR1cm4gZWxlbTtcblx0fVxuXHRJdGVtLnByb3RvdHlwZS5idWlsZEVsZW1lbnQgPSBmdW5jdGlvbihkYXRhKSB7XG5cdFx0dmFyIG5hbWUgPSBkYXRhLm5hbWU7XG5cdFx0dmFyIGlkID0gZGF0YS5pZDtcblx0XHR2YXIgdHlwZSA9IGRhdGEudHlwZTtcblx0XHR2YXIgc3BhbiA9ICQoXCI8c3Bhbj5cIik7XG5cdFx0c3Bhbi5hZGRDbGFzcyhcImdseXBoaWNvblwiKS5hZGRDbGFzcyhcImdseXBoaWNvbi1mb2xkZXItY2xvc2VcIik7XG5cdFx0dmFyIG5hbWVfc3BhbiA9ICQoXCI8c3BhbiBjbGFzcz1uYW1lPlwiKTtcblx0XHRuYW1lX3NwYW4udGV4dChuYW1lKTtcblx0XHRzcGFuLmFwcGVuZChuYW1lX3NwYW4pO1xuXHRcdHZhciBhID0gJChcIjxhIGhyZWY9L2FwaS9pdGVtL1wiICsgaWQgKyBcIiBpdGVtX2lkPVwiICsgaWQgKyBcIiBkcmFnZ2FibGU9ZmFsc2U+XCIpO1xuXHRcdGEuYXBwZW5kKHNwYW4pO1xuXHRcdHZhciBsaSA9ICQoXCI8bGkgaXRlbV9pZD1cIisgaWQgK1wiIGRyYWdnYWJsZT10cnVlPlwiKS5hZGRDbGFzcyhcIml0ZW1cIik7XG5cdFx0aWYgKCB0eXBlID09IFwiZm9sZGVyXCIgKSB7XG5cdFx0XHRsaS5hZGRDbGFzcyhcImZvbGRlclwiKTtcblx0XHR9XG5cdFx0bGkuYXBwZW5kKGEpO1xuXHRcdHJldHVybiBsaTtcblx0fVxuXHRJdGVtLmFkZCA9IGZ1bmN0aW9uKHBhcmVudEl0ZW0pIHtcblx0XHR2YXIgbmFtZSA9IFwiXCI7XG5cdFx0dmFyIHBhcmVudF9pZCA9IHBhcmVudEl0ZW0uYXR0cihcIml0ZW1faWRcIik7XG5cdFx0aWYgKCBuYW1lID0gcHJvbXB0KFwi5paw6KaP5L2c5oiQ44GX44G+44GZXCIsIFwi5paw44GX44GE44Ki44Kk44OG44OgXCIpICkge1xuXHRcdFx0YWpheC5wb3N0KHtcblx0XHRcdFx0dXJsOiBcIi9hcGkvaXRlbS9hZGRcIixcblx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdG5hbWU6IG5hbWUsXG5cdFx0XHRcdFx0cGFyZW50X2lkOiBwYXJlbnRfaWRcblx0XHRcdFx0fSxcblx0XHRcdFx0c3VjY2VzczogZnVuY3Rpb24obmV3X2l0ZW0pIHtcblx0XHRcdFx0XHRwYXJlbnRJdGVtLmZpbmQoXCJhXCIpLnRyaWdnZXIoXCJjbGlja1wiKTtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyggXCJhamF4IGl0ZW0vc2F2ZSBkYXRhOlwiLCBuZXdfaXRlbSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9XG5cdH07XG5cdFxuXHRhcHAuSXRlbS5zZXRDbGlja0V2ZW50ID0gZnVuY3Rpb24oKSB7XG5cdFx0XG5cdFx0JChkb2N1bWVudCkub24oXCJjbGlja1wiLCBcIi5pdGVtIGFcIiwgZnVuY3Rpb24oZSkge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdFx0dmFyIGNsaWNrZWRJdGVtID0gJChzZWxmKS5jbG9zZXN0KFwibGlcIik7XG5cdFx0XHR2YXIgY2xpY2tlZFVsID0gJChzZWxmKS5jbG9zZXN0KFwidWxcIik7XG5cdFx0XHR2YXIgcGFyZW50SXRlbXNBcmVhID0gJCh0aGlzKS5jbG9zZXN0KFwiLml0ZW1zXCIpO1xuXHRcdFx0XG5cdFx0XHQvLyDjgrPjg7Pjg4bjg7Pjg4Toqq3jgb/ovrzjgb9cblx0XHRcdHZhciB1cmwgPSAkKHNlbGYpLmF0dHIoXCJocmVmXCIpO1xuXHRcdFx0YXBwLkl0ZW1EZXRhaWwubG9hZENvbnRlbnQodXJsKTtcblx0XHRcdFxuXHRcdFx0Ly8gc2VsZWN0ZWTjgqLjgqTjg4bjg6DjgavjgZnjgotcblx0XHRcdC8vIOS7luOBruOCouOCpOODhuODoOOBr3NlbGVjdGVk44KS5aSW44GZXG5cdFx0XHRjbGlja2VkVWwuZmluZChcIi5pdGVtXCIpLnJlbW92ZUF0dHIoXCJzZWxlY3RlZFwiKTtcblx0XHRcdGNsaWNrZWRJdGVtLmF0dHIoXCJzZWxlY3RlZFwiLCB0cnVlKTtcblx0XHRcdFxuXHRcdFx0Ly8g44Ki44Kk44OG44Og6IOM5pmv6Imy44KS6Kq/5pW0XG5cdFx0XHR2b2lkIGZ1bmN0aW9uIGFkanVzdEJnQ29sb3IoKSB7XG5cdFx0XHRcdCQodGhpcykuY2xvc2VzdChcInVsXCIpLmZpbmQoXCJhXCIpLmNzcyhcImJhY2tncm91bmQtY29sb3JcIiwgXCJcIik7XG5cdFx0XHRcdCQodGhpcykuY3NzKFwiYmFja2dyb3VuZC1jb2xvclwiLFwiI2NjY2NjY1wiKTtcblx0XHRcdH0uYmluZCh0aGlzKSgpO1xuXHRcdFx0XG5cdFx0XHQvLyDlrZDjgqLjgqTjg4bjg6DjgpLoqq3jgb/ovrzjgb9cblx0XHRcdHZvaWQgZnVuY3Rpb24gbG9hZENoaWxkSXRlbXMoKSB7XG5cdFx0XHRcdGlmICggISBjbGlja2VkSXRlbS5oYXNDbGFzcyhcImZvbGRlclwiKSApIHtcblx0XHRcdFx0XHQvLyDjgq/jg6rjg4Pjgq/jgZfjgZ/jgqLjgqTjg4bjg6DjgYzjg5Xjgqnjg6vjg4DjgZjjgoPjgarjgYTjgarjgonkvZXjgoLjgZfjgarjgYRcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdFx0YWpheC5nZXQoe1xuXHRcdFx0XHRcdHVybDogXCIvYXBpL2l0ZW1zXCIsXG5cdFx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdFx0cGFyZW50X2lkOiAkKHNlbGYpLmF0dHIoXCJpdGVtX2lkXCIpXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRzdWNjZXNzOiBmdW5jdGlvbihpdGVtcykge1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHQvLyDoh6rouqvjga7jg5Xjgqnjg6vjg4DphY3kuIvjga5VTOOCkuS4gOW6puWJiumZpFxuXHRcdFx0XHRcdFx0dm9pZCBmdW5jdGlvbiBkZXN0cm95Q2hpbGRJdGVtKCkge1xuXHRcdFx0XHRcdFx0XHR2YXIgc2VsZlVsSWQgPSBjbGlja2VkVWwuYXR0cihcInVsX2lkXCIpO1xuXHRcdFx0XHRcdFx0XHR2YXIgZm91bmRGbGFnID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdHBhcmVudEl0ZW1zQXJlYS5maW5kKFwidWxcIikuZWFjaChmdW5jdGlvbihpKSB7XG5cdFx0XHRcdFx0XHRcdFx0dmFyIGVhY2hVbCA9ICQodGhpcyk7XG5cdFx0XHRcdFx0XHRcdFx0dmFyIGVhY2hVbElkID0gZWFjaFVsLmF0dHIoXCJ1bF9pZFwiKTtcblx0XHRcdFx0XHRcdFx0XHRpZiAoIGZvdW5kRmxhZyApIHtcblx0XHRcdFx0XHRcdFx0XHRcdGVhY2hVbC5yZW1vdmUoKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0aWYgKCBlYWNoVWxJZCA9PSBzZWxmVWxJZCApIHtcblx0XHRcdFx0XHRcdFx0XHRcdGZvdW5kRmxhZyA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH0oKTtcblx0XHRcdFx0XHRcdC8vIOiqreOBv+i+vOOCk+OBoOOCouOCpOODhuODoOOCkui/veWKoFxuXHRcdFx0XHRcdFx0JChcIi5pdGVtcyAuaW5uZXJcIikuYXBwZW5kKG5ldyBhcHAuSXRlbUxpc3QoaXRlbXMpKTtcblx0XHRcdFx0XHRcdC8vIFVM576k44Gu5ZCI6KiI5bmF44KSLml0ZW1z44Gr44K744OD44OIXG5cdFx0XHRcdFx0XHR2b2lkIGZ1bmN0aW9uIHNldEl0ZW1zV2lkdGgoKSB7XG5cdFx0XHRcdFx0XHRcdHZhciB3aWR0aCA9IDA7XG5cdFx0XHRcdFx0XHRcdCQoXCIuaXRlbXMgdWxcIikuZWFjaChmdW5jdGlvbih1bCkge1xuXHRcdFx0XHRcdFx0XHRcdHdpZHRoICs9ICQodGhpcykub3V0ZXJXaWR0aCgpO1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coIFwidG90YWwgd2lkdGg6XCIsIHdpZHRoICk7XG5cdFx0XHRcdFx0XHRcdCQoXCIuaXRlbXMgLmlubmVyXCIpLndpZHRoKHdpZHRoKzIwKTtcblx0XHRcdFx0XHRcdH0oKTtcblx0XHRcdFx0XHRcdC8vIC5pdGVtc+OCqOODquOCouWGheOBruOCueOCr+ODreODvOODq+OCkuWPs+OBq+WvhOOBm+OCi1xuXHRcdFx0XHRcdFx0dm9pZCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0JChcIi5pdGVtc1wiKS5zY3JvbGxMZWZ0KDk5OTk5OSk7XG5cdFx0XHRcdFx0XHR9KCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH0oKTtcblx0XHR9KTtcblx0fVxuXG5cdGFwcC5JdGVtLnNldERuREV2ZW50ID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGRyYWdfaXRlbV9pZCA9IG51bGw7XG5cdFx0dmFyIGRyb3BfaXRlbV9pZCA9IG51bGw7XG5cdFx0XG5cdFx0JChkb2N1bWVudCkub24oXCJkcmFnc3RhcnRcIiwgXCIuaXRlbXMgLml0ZW1cIiwgZnVuY3Rpb24oZSkge1xuXHRcdFx0ZHJhZ19pdGVtX2lkID0gJCh0aGlzKS5hdHRyKFwiaXRlbV9pZFwiKTtcblx0XHRcdGNvbnNvbGUubG9nKCBcImRyYWdzdGFydFwiICk7XG5cdFx0fSk7XG5cdFx0JChkb2N1bWVudCkub24oXCJkcmFnZW50ZXJcIiwgXCIuaXRlbXMgLml0ZW1cIiwgZnVuY3Rpb24oZSkge1xuXHRcdFx0ZHJvcF9pdGVtX2lkID0gJCh0aGlzKS5hdHRyKFwiaXRlbV9pZFwiKTtcblx0XHRcdCQodGhpcykuYWRkQ2xhc3MoXCJvdmVyXCIpO1xuXHRcdFx0Y29uc29sZS5sb2coIFwiZHJhZ2VudGVyXCIgKTtcblx0XHR9KTtcblx0XHQkKGRvY3VtZW50KS5vbihcImRyYWdsZWF2ZVwiLCBcIi5pdGVtcyAuaXRlbVwiLCBmdW5jdGlvbihlKSB7XG5cdFx0XHQkKHRoaXMpLnJlbW92ZUNsYXNzKFwib3ZlclwiKTtcblx0XHRcdGNvbnNvbGUubG9nKCBcImRyYWdsZWF2ZVwiICk7XG5cdFx0fSk7XG5cdFx0JChkb2N1bWVudCkub24oXCJkcmFnZW5kXCIsIFwiLml0ZW1zIC5pdGVtXCIsIGZ1bmN0aW9uKGUpIHtcblx0XHRcdFxuXHRcdFx0aWYgKCAhIGRyb3BfaXRlbV9pZCApIHtcblx0XHRcdFx0Y29uc29sZS5sb2coIFwiZHJvcOOBl+OBn2l0ZW1faWTjgYxudWxs44CBcmV0dXJuIGZhbHNlXCIgKTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCBkcmFnX2l0ZW1faWQgPT0gZHJvcF9pdGVtX2lkICkge1xuXHRcdFx0XHRjb25zb2xlLmxvZyggXCLlkIzjgZhJROOBrueCuuOAgXJldHVybiBmYWxzZVwiICk7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHRcdChmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIHBhcmVudF9pZCA9IGRyb3BfaXRlbV9pZDtcblx0XHRcdFx0dmFyIGlkID0gZHJhZ19pdGVtX2lkO1xuXHRcdFx0XHRhamF4LnBvc3Qoe1xuXHRcdFx0XHRcdHVybDogXCIvYXBpL2l0ZW0vdXBkYXRlXCIsXG5cdFx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdFx0aWQ6IGlkLFxuXHRcdFx0XHRcdFx0cGFyZW50X2lkOiBwYXJlbnRfaWRcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKG5ld19pdGVtKSB7XG5cdFx0XHRcdFx0XHQkKFwiLml0ZW1baXRlbV9pZD1cIisgcGFyZW50X2lkICtcIl0gYVwiKS50cmlnZ2VyKFwiY2xpY2tcIikuZm9jdXMoKTtcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCBcImFqYXggaXRlbS91cGRhdGVkX2l0ZW06XCIsIG5ld19pdGVtICk7XG5cdFx0XHRcdFx0XHQkKHRoaXMpLnJlbW92ZSgpO1xuXHRcdFx0XHRcdH0uYmluZCh0aGlzKVxuXHRcdFx0XHR9KTtcblx0XHRcdH0pKCk7XG5cdFx0XHRkcmFnb3ZlclN0eWxlUmVzZXQoKTtcblx0XHRcdGNvbnNvbGUubG9nKCBcImRyYWdlbmRcIiApO1xuXHRcdH0pO1xuXHRcdGZ1bmN0aW9uIGRyYWdvdmVyU3R5bGVSZXNldCgpIHtcblx0XHRcdGNvbnNvbGUubG9nKFwiZHJhZ292ZXJTdHlsZVJlc2V0LlwiKTtcblx0XHRcdCQoXCIuaXRlbXMgLml0ZW1cIikucmVtb3ZlQ2xhc3MoXCJvdmVyXCIpO1xuXHRcdH1cblx0fVxuXHRcblx0YXBwLkl0ZW0uc2V0UmlnaHRDbGlja0V2ZW50ID0gZnVuY3Rpb24oKSB7XG5cdFx0XG5cdH1cblx0XG59KCk7XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy93ZWIvaXRlbS5qc1xuICoqLyIsIihmdW5jdGlvbigpIHtcblx0YXBwLkl0ZW1EZXRhaWwgPSBJdGVtRGV0YWlsO1xuXHRcblx0ZnVuY3Rpb24gSXRlbURldGFpbCgpIHtcblx0fVxuXHRcblx0SXRlbURldGFpbC5sb2FkZWRJdGVtID0gbnVsbDtcblx0dmFyIGRvTG9hZFRpbWVyID0gbnVsbDtcblx0SXRlbURldGFpbC5sb2FkQ29udGVudCA9IGZ1bmN0aW9uKHVybCkge1xuXHRcdGlmICggZG9Mb2FkVGltZXIgKSB7XG5cdFx0XHRjbGVhclRpbWVvdXQoZG9Mb2FkVGltZXIpO1xuXHRcdH1cblx0XHQvLyDmjIflrprnp5LmlbDlvoXjgaPjgabjgYvjgonjg6rjgq/jgqjjgrnjg4hcblx0XHQvLyDjgqLjgqTjg4bjg6Dnp7vli5XjgpLnubDjgorov5TjgZnloLTlkIjjgIHnhKHpp4Tjgarjg6rjgq/jgqjjgrnjg4jjgavjgarjgovjgZ/jgoFcblx0XHRkb0xvYWRUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgZGV0YWlsQXJlYSA9ICQoXCIuZGV0YWlsXCIpO1xuXHRcdFx0YWpheC5nZXQoe1xuXHRcdFx0XHR1cmw6IHVybCxcblx0XHRcdFx0c3VjY2VzczogZnVuY3Rpb24oaXRlbSkge1xuXHRcdFx0XHRcdEl0ZW1EZXRhaWwubG9hZGVkSXRlbSA9IGl0ZW07XG5cdFx0XHRcdFx0ZGV0YWlsQXJlYS5zaG93KCk7XG5cdFx0XHRcdFx0ZGV0YWlsQXJlYS5maW5kKFwiaDJcIikudGV4dChpdGVtLm5hbWUpO1xuXHRcdFx0XHRcdGRldGFpbEFyZWEuZmluZChcIi50ZXh0XCIpLmh0bWwoIGFwcC51dGlsLmF1dG9MaW5rKGl0ZW0udGV4dCkgKTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHR2YXIgZGF0YSA9IHt9O1xuXHRcdFx0XHRcdGRhdGEuY3JlYXRlZF9hdCA9IGl0ZW0uY3JlYXRlZF9hdDtcblx0XHRcdFx0XHRkYXRhLnVwZGF0ZWRfYXQgPSBpdGVtLnVwZGF0ZWRfYXQ7XG5cdFx0XHRcdFx0ZGV0YWlsQXJlYS5maW5kKFwiLmNvbnRlbnRcIikuaHRtbCggYXBwLnV0aWwub2JqZWN0VG9IdG1sKGRhdGEpICk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0sIDEwMCk7XG5cdH1cblx0XG5cdCQoZG9jdW1lbnQpLm9uKFwiY2xpY2tcIiwgXCIuY29udGVudCAubmFtZSwgLnRleHRcIiwgZnVuY3Rpb24oKSB7XG5cdFx0JCh0aGlzKS5hdHRyKFwiY29udGVudGVkaXRhYmxlXCIsXCJ0cnVlXCIpLmZvY3VzKCk7XG5cdFx0Ly8gY29uc29sZS5sb2coIFwiIVwiICk7XG5cdH0pO1xuXHQkKGRvY3VtZW50KS5vbihcImJsdXJcIiwgXCIuY29udGVudCAubmFtZSwgLnRleHRcIiwgZnVuY3Rpb24oKSB7XG5cdFx0JCh0aGlzKS5hdHRyKFwiY29udGVudGVkaXRhYmxlXCIsXCJmYWxzZVwiKTtcblx0XHR2YXIgZGV0YWlsQXJlYSA9ICQoXCIuZGV0YWlsXCIpO1xuXHRcdGFqYXgucG9zdCh7XG5cdFx0XHR1cmw6IFwiL2FwaS9pdGVtL3VwZGF0ZVwiLFxuXHRcdFx0ZGF0YToge1xuXHRcdFx0XHRpZDogSXRlbURldGFpbC5sb2FkZWRJdGVtLmlkLFxuXHRcdFx0XHRuYW1lOiBkZXRhaWxBcmVhLmZpbmQoXCJoMi5uYW1lXCIpLnRleHQoKSxcblx0XHRcdFx0dGV4dDogZGV0YWlsQXJlYS5maW5kKFwiLnRleHRcIikuaHRtbCgpXG5cdFx0XHR9LFxuXHRcdFx0c3VjY2VzczogZnVuY3Rpb24oaXRlbSkge1xuXHRcdFx0XHRjb25zb2xlLmxvZyggXCIvYXBpL2l0ZW0vdXBkYXRlIGl0ZW06XCIsIGl0ZW0gKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fSk7XG59KSgpO1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvd2ViL2l0ZW1fZGV0YWlsLmpzXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==